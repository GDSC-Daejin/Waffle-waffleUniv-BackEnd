<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
</head>
<body>
<h1>홈 화면</h1>
<div id="buttonContainer">
  <button id="loginButton" onclick="redirectToLogin()">로그인</button>
  <button id="logoutButton" onclick="logout()" style="display: none;">로그아웃</button>
</div>

<script>
  // 로그인 버튼 클릭 시 로그인 페이지로 이동
  function redirectToLogin() {
    window.location.href = "/members/login";
  }

  // 로그아웃 처리
  function logout() {
    localStorage.removeItem('accessToken'); // JWT 삭제
    localStorage.removeItem('refreshToken');
    alert("로그아웃되었습니다.");
    updateUI(); // UI 업데이트
  }

  // 로그인 상태 확인 및 버튼 표시 처리
  function updateUI() {
    const token = localStorage.getItem('accessToken');
    document.getElementById('loginButton').style.display = token ? "none" : "block";
    document.getElementById('logoutButton').style.display = token ? "block" : "none";
  }

  // 페이지 로드 시 로그인 상태 확인
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const jwtToken = urlParams.get("jwtToken");

    if (jwtToken) {
      localStorage.setItem('accessToken', jwtToken); // JWT 저장
      history.replaceState({}, document.title, window.location.pathname); // URL 정리
    }

    updateUI();
  });
</script>
</body>
</html>
